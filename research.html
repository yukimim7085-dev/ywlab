<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…¼ë¬¸ ë¦¬ì„œì¹˜ í—ˆë¸Œ â€” YW Finance Lab</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Playfair+Display:wght@400;700;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-card: #16161f;
            --bg-card-hover: #1c1c28;
            --accent-gold: #d4a853;
            --accent-gold-dim: #b8923f;
            --accent-green: #22c55e;
            --accent-red: #ef4444;
            --accent-blue: #3b82f6;
            --accent-purple: #a78bfa;
            --accent-cyan: #22d3ee;
            --text-primary: #e8e6e3;
            --text-secondary: #9ca3af;
            --text-dim: #6b7280;
            --border: #1f1f2e;
            --border-light: #2a2a3a;
        }
        *{margin:0;padding:0;box-sizing:border-box}
        html{scroll-behavior:smooth}
        body{font-family:'Noto Sans KR',sans-serif;background:var(--bg-primary);color:var(--text-primary);overflow-x:hidden;min-height:100vh}
        body::after{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:9998}
        .bg-gradient{position:fixed;inset:0;z-index:-1;overflow:hidden}
        .bg-gradient::before{content:'';position:absolute;width:800px;height:800px;top:-200px;right:-200px;background:radial-gradient(circle,rgba(59,130,246,0.06) 0%,transparent 70%);animation:floatOrb 20s ease-in-out infinite}
        .bg-gradient::after{content:'';position:absolute;width:600px;height:600px;bottom:-100px;left:-100px;background:radial-gradient(circle,rgba(212,168,83,0.04) 0%,transparent 70%);animation:floatOrb 25s ease-in-out infinite reverse}
        @keyframes floatOrb{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(80px,-60px) scale(1.1)}66%{transform:translate(-40px,40px) scale(0.95)}}

        /* HEADER */
        header{position:fixed;top:0;left:0;right:0;z-index:1000;padding:0 2rem;background:rgba(10,10,15,0.88);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
        nav{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;height:64px}
        .logo{display:flex;align-items:center;gap:12px;text-decoration:none}
        .logo-icon{width:32px;height:32px;background:linear-gradient(135deg,var(--accent-gold),var(--accent-gold-dim));border-radius:8px;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-weight:900;font-size:15px;color:var(--bg-primary)}
        .logo-text{font-family:'Playfair Display',serif;font-size:1.1rem;font-weight:700;color:var(--text-primary)}
        .logo-text span{color:var(--accent-gold)}
        .nav-links{display:flex;gap:8px;list-style:none}
        .nav-links a{color:var(--text-secondary);text-decoration:none;font-size:0.85rem;padding:6px 12px;border-radius:6px;transition:all 0.3s}
        .nav-links a:hover,.nav-links a.active{color:var(--accent-gold);background:rgba(212,168,83,0.1)}
        .back-link{color:var(--text-secondary);text-decoration:none;font-size:0.85rem;display:flex;align-items:center;gap:6px;transition:color 0.3s}
        .back-link:hover{color:var(--accent-gold)}
        @media(max-width:768px){.nav-links{display:none}.back-link{font-size:0.8rem}}

        /* MAIN */
        main{max-width:1200px;margin:0 auto;padding:90px 2rem 4rem}

        /* HERO */
        .hero{text-align:center;margin-bottom:3rem;animation:fadeUp 0.6s ease-out}
        .hero h1{font-family:'Playfair Display',serif;font-size:clamp(2rem,5vw,3.2rem);font-weight:900;margin-bottom:1rem;letter-spacing:-0.02em}
        .hero h1 .gold{color:var(--accent-gold)}
        .hero p{color:var(--text-secondary);font-size:1.05rem;max-width:600px;margin:0 auto 2rem;line-height:1.7}
        @keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

        /* LIVE INDICATORS */
        .indicators-section{margin-bottom:3rem}
        .section-label{font-family:'JetBrains Mono',monospace;font-size:0.75rem;color:var(--accent-gold);letter-spacing:2px;text-transform:uppercase;margin-bottom:0.5rem}
        .section-title{font-family:'Playfair Display',serif;font-size:1.6rem;font-weight:700;margin-bottom:1.5rem}
        .indicators-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}
        .indicator-card{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:16px;transition:all 0.3s;position:relative;overflow:hidden}
        .indicator-card:hover{border-color:var(--border-light);transform:translateY(-2px)}
        .indicator-label{font-size:0.75rem;color:var(--text-dim);margin-bottom:4px;display:flex;align-items:center;gap:6px}
        .indicator-flag{font-size:0.85rem}
        .indicator-value{font-family:'JetBrains Mono',monospace;font-size:1.3rem;font-weight:700;color:var(--text-primary);margin-bottom:2px}
        .indicator-change{font-family:'JetBrains Mono',monospace;font-size:0.75rem;padding:2px 6px;border-radius:4px;display:inline-block}
        .indicator-change.up{color:var(--accent-green);background:rgba(34,197,94,0.1)}
        .indicator-change.down{color:var(--accent-red);background:rgba(239,68,68,0.1)}
        .indicator-change.neutral{color:var(--text-dim);background:rgba(107,114,128,0.1)}
        .indicator-loading{color:var(--text-dim);font-size:0.8rem}
        .indicator-source{font-size:0.6rem;color:var(--text-dim);margin-top:4px}
        .indicator-spark{position:absolute;bottom:0;left:0;right:0;height:30px;opacity:0.3}

        /* TABS */
        .tabs{display:flex;gap:4px;margin-bottom:2rem;overflow-x:auto;padding-bottom:4px}
        .tab{padding:8px 18px;border-radius:8px;font-size:0.85rem;border:1px solid var(--border);background:transparent;color:var(--text-secondary);cursor:pointer;transition:all 0.3s;white-space:nowrap}
        .tab:hover{border-color:var(--border-light);color:var(--text-primary)}
        .tab.active{background:rgba(212,168,83,0.15);border-color:var(--accent-gold);color:var(--accent-gold)}
        .tab .count{font-family:'JetBrains Mono',monospace;font-size:0.7rem;background:var(--border);padding:1px 6px;border-radius:10px;margin-left:6px}
        .tab.active .count{background:rgba(212,168,83,0.2)}

        /* SEARCH */
        .search-bar{display:flex;gap:12px;margin-bottom:2rem;flex-wrap:wrap}
        .search-input{flex:1;min-width:250px;padding:12px 16px;background:var(--bg-card);border:1px solid var(--border);border-radius:10px;color:var(--text-primary);font-size:0.9rem;outline:none;transition:border-color 0.3s}
        .search-input:focus{border-color:var(--accent-gold)}
        .search-input::placeholder{color:var(--text-dim)}
        .sort-select{padding:12px 16px;background:var(--bg-card);border:1px solid var(--border);border-radius:10px;color:var(--text-secondary);font-size:0.85rem;outline:none;cursor:pointer}
        .sort-select option{background:var(--bg-card)}

        /* PAPER CARDS */
        .papers-grid{display:flex;flex-direction:column;gap:12px}
        .paper-card{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:20px 24px;transition:all 0.3s;cursor:pointer;text-decoration:none;display:block;position:relative}
        .paper-card:hover{border-color:var(--accent-gold);transform:translateY(-1px);background:var(--bg-card-hover)}
        .paper-meta{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}
        .paper-source{font-size:0.7rem;font-weight:600;padding:3px 8px;border-radius:4px;letter-spacing:0.5px}
        .paper-source.bok{background:rgba(59,130,246,0.15);color:var(--accent-blue)}
        .paper-source.fed{background:rgba(167,139,250,0.15);color:var(--accent-purple)}
        .paper-source.kdi{background:rgba(34,211,238,0.15);color:var(--accent-cyan)}
        .paper-source.imf{background:rgba(34,197,94,0.15);color:var(--accent-green)}
        .paper-source.bis{background:rgba(212,168,83,0.15);color:var(--accent-gold)}
        .paper-source.nber{background:rgba(239,68,68,0.15);color:var(--accent-red)}
        .paper-date{font-family:'JetBrains Mono',monospace;font-size:0.7rem;color:var(--text-dim)}
        .paper-type{font-size:0.7rem;color:var(--text-dim);background:var(--border);padding:2px 6px;border-radius:4px}
        .paper-title{font-size:1rem;font-weight:600;color:var(--text-primary);margin-bottom:6px;line-height:1.5}
        .paper-card:hover .paper-title{color:var(--accent-gold)}
        .paper-desc{font-size:0.85rem;color:var(--text-secondary);line-height:1.6;margin-bottom:10px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
        .paper-tags{display:flex;gap:6px;flex-wrap:wrap}
        .paper-tag{font-size:0.7rem;color:var(--text-dim);border:1px solid var(--border);padding:2px 8px;border-radius:12px}
        .paper-arrow{position:absolute;right:20px;top:50%;transform:translateY(-50%);font-size:1.2rem;color:var(--text-dim);transition:all 0.3s}
        .paper-card:hover .paper-arrow{color:var(--accent-gold);right:16px}
        @media(max-width:768px){.paper-arrow{display:none}}

        /* RESOURCES GRID */
        .resources-section{margin-top:3rem;margin-bottom:3rem}
        .resources-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
        .resource-card{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:20px;text-decoration:none;transition:all 0.3s;display:block}
        .resource-card:hover{border-color:var(--accent-gold);transform:translateY(-2px)}
        .resource-icon{font-size:2rem;margin-bottom:12px}
        .resource-name{font-size:1rem;font-weight:600;color:var(--text-primary);margin-bottom:6px}
        .resource-card:hover .resource-name{color:var(--accent-gold)}
        .resource-desc{font-size:0.8rem;color:var(--text-secondary);line-height:1.5;margin-bottom:10px}
        .resource-url{font-family:'JetBrains Mono',monospace;font-size:0.7rem;color:var(--text-dim)}

        /* EMPTY / LOADING */
        .loading-state,.empty-state{text-align:center;padding:3rem 1rem;color:var(--text-dim)}
        .loading-state .spinner{display:inline-block;width:24px;height:24px;border:2px solid var(--border);border-top-color:var(--accent-gold);border-radius:50%;animation:spin 0.8s linear infinite;margin-bottom:12px}
        @keyframes spin{to{transform:rotate(360deg)}}

        /* FOOTER */
        footer{border-top:1px solid var(--border);padding:2rem;text-align:center;margin-top:4rem}
        .footer-links{display:flex;justify-content:center;gap:24px;margin-bottom:1rem;flex-wrap:wrap}
        .footer-links a{color:var(--text-dim);text-decoration:none;font-size:0.8rem;transition:color 0.3s}
        .footer-links a:hover{color:var(--accent-gold)}
        .footer-copy{font-size:0.7rem;color:var(--text-dim)}

        /* ANIMATION */
        .reveal{opacity:0;transform:translateY(20px);transition:all 0.6s ease-out}
        .reveal.visible{opacity:1;transform:translateY(0)}
    </style>
</head>
<body>
<div class="bg-gradient"></div>

<header>
    <nav>
        <a href="index.html" class="logo">
            <div class="logo-icon">Y</div>
            <div class="logo-text">YW <span>Finance Lab</span></div>
        </a>
        <ul class="nav-links">
            <li><a href="index.html">í™ˆ</a></li>
            <li><a href="education.html">ê²½ì œêµìœ¡</a></li>
            <li><a href="quiz.html">í€´ì¦ˆ</a></li>
            <li><a href="research.html" class="active">ë¦¬ì„œì¹˜</a></li>
        </ul>
        <a href="index.html" class="back-link">â† ë©”ì¸ìœ¼ë¡œ</a>
    </nav>
</header>

<main>
    <!-- HERO -->
    <section class="hero">
        <h1>ë…¼ë¬¸ <span class="gold">ë¦¬ì„œì¹˜</span> í—ˆë¸Œ</h1>
        <p>í•œêµ­ì€í–‰Â·ì—°ì¤€Â·IMFÂ·BISì˜ ê²½ì œ ì—°êµ¬ ìë£Œì™€ ì‹¤ì‹œê°„ ì§€í‘œë¥¼ í•œëˆˆì—.<br>ë°ì´í„° ê¸°ë°˜ íˆ¬ì ì¸ì‚¬ì´íŠ¸ë¥¼ ë°œê²¬í•˜ì„¸ìš”.</p>
    </section>

    <!-- LIVE INDICATORS -->
    <section class="indicators-section reveal">
        <div class="section-label">// Live Indicators</div>
        <div class="section-title">ì‹¤ì‹œê°„ ê²½ì œ ì§€í‘œ</div>
        <div class="indicators-grid" id="indicatorsGrid">
            <!-- JSë¡œ ì±„ì›Œì§ -->
        </div>
    </section>

    <!-- RESEARCH PAPERS -->
    <section class="reveal">
        <div class="section-label">// Research Papers</div>
        <div class="section-title">ê²½ì œÂ·ê¸ˆìœµ ì—°êµ¬ ìë£Œ</div>

        <div class="tabs" id="tabs">
            <button class="tab active" data-cat="all">ì „ì²´ <span class="count" id="countAll">0</span></button>
            <button class="tab" data-cat="bok">í•œêµ­ì€í–‰ <span class="count" id="countBok">0</span></button>
            <button class="tab" data-cat="fed">ì—°ì¤€Â·FRED <span class="count" id="countFed">0</span></button>
            <button class="tab" data-cat="kdi">KDI <span class="count" id="countKdi">0</span></button>
            <button class="tab" data-cat="intl">IMFÂ·BISÂ·NBER <span class="count" id="countIntl">0</span></button>
        </div>

        <div class="search-bar">
            <input type="text" class="search-input" id="searchInput" placeholder="ë…¼ë¬¸ ì œëª©, í‚¤ì›Œë“œë¡œ ê²€ìƒ‰...">
            <select class="sort-select" id="sortSelect">
                <option value="date">ìµœì‹ ìˆœ</option>
                <option value="relevance">ê´€ë ¨ë„ìˆœ</option>
            </select>
        </div>

        <div class="papers-grid" id="papersGrid">
            <div class="loading-state"><div class="spinner"></div><div>ì—°êµ¬ ìë£Œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div></div>
        </div>
    </section>

    <!-- RESEARCH RESOURCES -->
    <section class="resources-section reveal">
        <div class="section-label">// Resources</div>
        <div class="section-title">ì£¼ìš” ì—°êµ¬ ë°ì´í„°ë² ì´ìŠ¤</div>
        <div class="resources-grid" id="resourcesGrid"></div>
    </section>
</main>

<footer>
    <div class="footer-links">
        <a href="index.html">í™ˆ</a>
        <a href="education.html">ê²½ì œêµìœ¡</a>
        <a href="quiz.html">í€´ì¦ˆ</a>
        <a href="research.html">ë¦¬ì„œì¹˜</a>
    </div>
    <div class="footer-copy">Â© 2026 YW Finance Lab. êµìœ¡ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  API KEYS & CONFIG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FRED_KEY = '4fb5dac909861e78d5e76dadeb5cf9d7';
const ECOS_KEY = 'QZIGLKAE4NXE2AH490NG';

// CORS í”„ë¡ì‹œ ëª©ë¡ (ìˆœì°¨ ì‹œë„)
const PROXIES = [
    url => `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
    url => `https://corsproxy.io/?${encodeURIComponent(url)}`,
    url => url  // ì§ì ‘ ì‹œë„ (CORS ì§€ì›í•˜ëŠ” ê²½ìš°)
];

async function fetchWithProxy(url) {
    for (const proxy of PROXIES) {
        try {
            const resp = await fetch(proxy(url), { signal: AbortSignal.timeout(8000) });
            if (resp.ok) {
                const text = await resp.text();
                return JSON.parse(text);
            }
        } catch (e) { /* ë‹¤ìŒ í”„ë¡ì‹œ ì‹œë„ */ }
    }
    return null;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  REVEAL ANIMATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const observer = new IntersectionObserver((entries) => {
    entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); observer.unobserve(e.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LIVE ECONOMIC INDICATORS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const indicators = [
    { id: 'FEDFUNDS', label: 'ë¯¸êµ­ ê¸°ì¤€ê¸ˆë¦¬', flag: 'ğŸ‡ºğŸ‡¸', unit: '%', source: 'FRED', type: 'fred' },
    { id: 'DGS10', label: 'ë¯¸êµ­ 10ë…„ë¬¼', flag: 'ğŸ‡ºğŸ‡¸', unit: '%', source: 'FRED', type: 'fred' },
    { id: 'DGS2', label: 'ë¯¸êµ­ 2ë…„ë¬¼', flag: 'ğŸ‡ºğŸ‡¸', unit: '%', source: 'FRED', type: 'fred' },
    { id: 'UNRATE', label: 'ë¯¸êµ­ ì‹¤ì—…ë¥ ', flag: 'ğŸ‡ºğŸ‡¸', unit: '%', source: 'FRED', type: 'fred' },
    { id: 'CPIAUCSL', label: 'ë¯¸êµ­ CPI', flag: 'ğŸ‡ºğŸ‡¸', unit: '', source: 'FRED', type: 'fred' },
    { id: 'DEXKOUS', label: 'ì›/ë‹¬ëŸ¬ í™˜ìœ¨', flag: 'ğŸ‡°ğŸ‡·', unit: 'ì›', source: 'FRED', type: 'fred' },
    { id: 'DCOILWTICO', label: 'WTI ìœ ê°€', flag: 'ğŸ›¢ï¸', unit: '$', source: 'FRED', type: 'fred' },
    { id: 'VIXCLS', label: 'VIX ì§€ìˆ˜', flag: 'ğŸ“Š', unit: '', source: 'FRED', type: 'fred' },
    { id: 'BAMLH0A0HYM2', label: 'í•˜ì´ì¼ë“œ ìŠ¤í”„ë ˆë“œ', flag: 'ğŸ“ˆ', unit: '%', source: 'FRED', type: 'fred' },
    { id: 'WALCL', label: 'ì—°ì¤€ ì´ìì‚°', flag: 'ğŸ›ï¸', unit: 'B$', source: 'FRED', type: 'fred' },
    { id: 'bok_rate', label: 'í•œêµ­ ê¸°ì¤€ê¸ˆë¦¬', flag: 'ğŸ‡°ğŸ‡·', unit: '%', source: 'ECOS', type: 'ecos', stat: '722Y001', item: '0101000' },
    { id: 'bok_cpi', label: 'í•œêµ­ CPI', flag: 'ğŸ‡°ğŸ‡·', unit: '', source: 'ECOS', type: 'ecos', stat: '901Y009', item: '0' },
];

async function fetchFRED(seriesId) {
    const end = new Date().toISOString().slice(0, 10);
    const start = new Date(Date.now() - 400 * 86400000).toISOString().slice(0, 10);
    const url = `https://api.stlouisfed.org/fred/series/observations?series_id=${seriesId}&api_key=${FRED_KEY}&file_type=json&sort_order=desc&limit=2&observation_start=${start}`;
    try {
        const data = await fetchWithProxy(url);
        if (!data) return null;
        const obs = data.observations?.filter(o => o.value !== '.');
        if (obs && obs.length >= 2) {
            const current = parseFloat(obs[0].value);
            const prev = parseFloat(obs[1].value);
            const change = current - prev;
            const pct = prev !== 0 ? (change / prev) * 100 : 0;
            return { value: current, change, pct, date: obs[0].date };
        } else if (obs && obs.length === 1) {
            return { value: parseFloat(obs[0].value), change: 0, pct: 0, date: obs[0].date };
        }
    } catch (e) { console.warn('FRED error:', seriesId, e); }
    return null;
}

async function fetchECOS(statCode, itemCode) {
    const now = new Date();
    const end = now.getFullYear() + String(now.getMonth() + 1).padStart(2, '0');
    const startD = new Date(now);
    startD.setMonth(startD.getMonth() - 13);
    const start = startD.getFullYear() + String(startD.getMonth() + 1).padStart(2, '0');
    const url = `https://ecos.bok.or.kr/api/StatisticSearch/${ECOS_KEY}/json/kr/1/5/${statCode}/M/${start}/${end}/${itemCode}`;
    try {
        const data = await fetchWithProxy(url);
        if (!data) return null;
        const rows = data?.StatisticSearch?.row;
        if (rows && rows.length >= 2) {
            const current = parseFloat(rows[rows.length - 1].DATA_VALUE);
            const prev = parseFloat(rows[rows.length - 2].DATA_VALUE);
            const change = current - prev;
            const pct = prev !== 0 ? (change / prev) * 100 : 0;
            return { value: current, change, pct, date: rows[rows.length - 1].TIME };
        } else if (rows && rows.length === 1) {
            return { value: parseFloat(rows[0].DATA_VALUE), change: 0, pct: 0, date: rows[0].TIME };
        }
    } catch (e) { console.warn('ECOS error:', statCode, e); }
    return null;
}

function formatValue(val, unit, id) {
    if (val == null) return '--';
    if (unit === 'B$') return '$' + (val / 1000000).toFixed(1) + 'T';
    if (unit === '$') return '$' + val.toFixed(2);
    if (unit === 'ì›') return val.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',') + 'ì›';
    if (unit === '%') return val.toFixed(2) + '%';
    if (id === 'CPIAUCSL' || id === 'bok_cpi') return val.toFixed(1);
    return val.toFixed(2);
}

let loadedCount = 0;
let totalCount = indicators.length;

async function loadSingleIndicator(ind) {
    let result = null;
    if (ind.type === 'fred') {
        result = await fetchFRED(ind.id);
    } else if (ind.type === 'ecos') {
        result = await fetchECOS(ind.stat, ind.item);
    }
    const card = document.getElementById(`ind-${ind.id}`);
    if (!card) return;
    loadedCount++;
    if (result) {
        const dir = result.change > 0 ? 'up' : result.change < 0 ? 'down' : 'neutral';
        const sign = result.change > 0 ? '+' : '';
        card.innerHTML = `
            <div class="indicator-label"><span class="indicator-flag">${ind.flag}</span> ${ind.label}</div>
            <div class="indicator-value">${formatValue(result.value, ind.unit, ind.id)}</div>
            <div class="indicator-change ${dir}">${sign}${result.pct.toFixed(2)}%</div>
            <div class="indicator-source">${ind.source} Â· ${result.date}</div>
        `;
        card.style.borderColor = 'var(--border-light)';
    } else {
        card.innerHTML = `
            <div class="indicator-label"><span class="indicator-flag">${ind.flag}</span> ${ind.label}</div>
            <div class="indicator-value" style="font-size:0.85rem;color:var(--text-dim)">ì—°ê²° ì‹¤íŒ¨</div>
            <div class="indicator-source">${ind.source} Â· <span onclick="retryIndicator('${ind.id}')" style="color:var(--accent-gold);cursor:pointer;text-decoration:underline">ì¬ì‹œë„</span></div>
        `;
    }
    // ì§„í–‰ ìƒíƒœ í‘œì‹œ
    document.getElementById('loadProgress').textContent = `${loadedCount}/${totalCount} ì§€í‘œ ë¡œë“œë¨`;
}

function retryIndicator(id) {
    const ind = indicators.find(i => i.id === id);
    if (ind) {
        const card = document.getElementById(`ind-${ind.id}`);
        card.innerHTML = `
            <div class="indicator-label"><span class="indicator-flag">${ind.flag}</span> ${ind.label}</div>
            <div class="indicator-value indicator-loading">ì¬ì‹œë„ ì¤‘...</div>
            <div class="indicator-source">${ind.source}</div>
        `;
        loadedCount--;
        loadSingleIndicator(ind);
    }
}

async function loadIndicators() {
    const grid = document.getElementById('indicatorsGrid');
    grid.innerHTML = `<div id="loadProgress" style="grid-column:1/-1;font-size:0.75rem;color:var(--text-dim);font-family:'JetBrains Mono',monospace">0/${totalCount} ì§€í‘œ ë¡œë“œ ì¤‘...</div>` +
        indicators.map(ind => `
        <div class="indicator-card" id="ind-${ind.id}">
            <div class="indicator-label"><span class="indicator-flag">${ind.flag}</span> ${ind.label}</div>
            <div class="indicator-value indicator-loading">ë¡œë”© ì¤‘...</div>
            <div class="indicator-source">${ind.source}</div>
        </div>
    `).join('');

    // ë³‘ë ¬ë¡œ 3ê°œì”© ë¡œë“œ (API ë¶€í•˜ ë¶„ì‚°)
    const batchSize = 3;
    for (let i = 0; i < indicators.length; i += batchSize) {
        const batch = indicators.slice(i, i + batchSize);
        await Promise.all(batch.map(ind => loadSingleIndicator(ind)));
    }
    const progress = document.getElementById('loadProgress');
    if (progress) progress.textContent = `âœ“ ${loadedCount}/${totalCount} ì§€í‘œ ë¡œë“œ ì™„ë£Œ`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RESEARCH PAPERS DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const papers = [
    // í•œêµ­ì€í–‰
    { cat:'bok', source:'BOK', type:'Working Paper', date:'2026-02', title:'í•œêµ­ í†µí™”ì •ì±…ì˜ íŒŒê¸‰ê²½ë¡œì™€ ì‹œì°¨ì— ê´€í•œ ì—°êµ¬', desc:'ê¸°ì¤€ê¸ˆë¦¬ ë³€ê²½ì´ ì‹¤ë¬¼ê²½ì œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì˜ ì‹œì°¨ êµ¬ì¡°ë¥¼ VAR ëª¨í˜•ìœ¼ë¡œ ë¶„ì„. ê¸ˆë¦¬â†’í™˜ìœ¨â†’ìˆ˜ì¶œ ê²½ë¡œê°€ ê°€ì¥ ë¹ ë¥´ê³ , ê¸ˆë¦¬â†’ê°€ê³„ë¶€ì±„â†’ì†Œë¹„ ê²½ë¡œëŠ” 6~9ê°œì›”ì˜ ì‹œì°¨ë¥¼ ë³´ì„.', tags:['í†µí™”ì •ì±…','ê¸ˆë¦¬','VARëª¨í˜•'], url:'https://www.bok.or.kr/portal/bbs/B0000338/list.do' },
    { cat:'bok', source:'BOK', type:'ì´ìŠˆë…¸íŠ¸', date:'2026-01', title:'ê°€ê³„ë¶€ì±„ êµ¬ì¡° ë³€í™”ì™€ ê¸ˆìœµì•ˆì • ë¦¬ìŠ¤í¬ í‰ê°€', desc:'DSR ê·œì œ ê°•í™” ì´í›„ ê°€ê³„ë¶€ì±„ì˜ ì§ˆì  ë³€í™”ë¥¼ ë¶„ì„. ê³ ì •ê¸ˆë¦¬ ë¹„ì¤‘ í™•ëŒ€ë¡œ ê¸ˆë¦¬ ë¦¬ìŠ¤í¬ ì™„í™”ë˜ì—ˆìœ¼ë‚˜, ìì˜ì—…ì ëŒ€ì¶œì˜ ë¶€ì‹¤ ìœ„í—˜ ìƒì¡´.', tags:['ê°€ê³„ë¶€ì±„','DSR','ê¸ˆìœµì•ˆì •'], url:'https://www.bok.or.kr/portal/bbs/B0000338/list.do' },
    { cat:'bok', source:'BOK', type:'ì¡°ì‚¬í†µê³„ì›”ë³´', date:'2026-01', title:'2025ë…„ ê²½ì œë™í–¥ ë¶„ì„ ë° 2026ë…„ ì „ë§', desc:'ìˆ˜ì¶œ íšŒë³µì„¸ì™€ ë‚´ìˆ˜ ë¶€ì§„ì˜ ì–‘ê·¹í™” ì§€ì†. ë°˜ë„ì²´ ìˆ˜ì¶œ í˜¸ì¡°ì—ë„ ë¶ˆêµ¬ ì„œë¹„ìŠ¤ì—… íšŒë³µ ì§€ì—°. 2026ë…„ GDP ì„±ì¥ë¥  2.1% ì „ë§.', tags:['ê²½ì œì „ë§','GDP','ìˆ˜ì¶œ'], url:'https://www.bok.or.kr/portal/bbs/B0000340/list.do' },
    { cat:'bok', source:'BOK', type:'Working Paper', date:'2025-12', title:'AI ê¸°ìˆ  ë„ì…ì´ í•œêµ­ ë…¸ë™ì‹œì¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥', desc:'ì‚°ì—…ë³„ AI ë„ì…ë¥ ê³¼ ê³ ìš© ë³€í™”ë¥¼ íŒ¨ë„ ë°ì´í„°ë¡œ ë¶„ì„. ì œì¡°ì—… ë‹¨ìˆœ ë°˜ë³µ ì§ì¢…ì˜ ëŒ€ì²´ íš¨ê³¼ê°€ ëšœë ·í•˜ë‚˜, ITÂ·ê¸ˆìœµ ì „ë¬¸ì§ì€ ë³´ì™„ íš¨ê³¼ê°€ ìš°ì„¸.', tags:['AI','ë…¸ë™ì‹œì¥','ê¸°ìˆ í˜ì‹ '], url:'https://www.bok.or.kr/portal/bbs/B0000338/list.do' },
    { cat:'bok', source:'BOK', type:'ê¸ˆìœµì•ˆì •ë³´ê³ ì„œ', date:'2025-12', title:'ë¶€ë™ì‚° PF ë¦¬ìŠ¤í¬ì™€ ê¸ˆìœµì‹œìŠ¤í…œ ì˜í–¥ ë¶„ì„', desc:'ë¶€ë™ì‚° í”„ë¡œì íŠ¸ íŒŒì´ë‚¸ì‹± ë¶€ì‹¤ì´ ì €ì¶•ì€í–‰Â·ì¦ê¶Œì‚¬ì— ë¯¸ì¹˜ëŠ” ì—°ì‡„ íš¨ê³¼ë¥¼ ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ë¡œ ë¶„ì„. ì‹œìŠ¤í…œ ë¦¬ìŠ¤í¬ ì „ì´ ê²½ë¡œì™€ ì •ì±… ëŒ€ì‘ ë°©ì•ˆ ì œì‹œ.', tags:['ë¶€ë™ì‚°PF','ê¸ˆìœµì•ˆì •','ìŠ¤íŠ¸ë ˆìŠ¤í…ŒìŠ¤íŠ¸'], url:'https://www.bok.or.kr/portal/bbs/B0000339/list.do' },
    { cat:'bok', source:'BOK', type:'ì´ìŠˆë…¸íŠ¸', date:'2025-11', title:'ë””ì§€í„¸ ì›í™”(CBDC) íŒŒì¼ëŸ¿ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë³´ê³ ', desc:'2025ë…„ í•˜ë°˜ê¸° ì§„í–‰ëœ CBDC íŒŒì¼ëŸ¿ ê²°ê³¼ ë¶„ì„. ì˜¤í”„ë¼ì¸ ê²°ì œ ì•ˆì •ì„±, ê°œì¸ì •ë³´ ë³´í˜¸ ê¸°ìˆ , ê¸ˆìœµí¬ìš©ì„± ì¸¡ë©´ì—ì„œì˜ ì„±ê³¼ì™€ í•œê³„ì .', tags:['CBDC','ë””ì§€í„¸í™”í','í•€í…Œí¬'], url:'https://www.bok.or.kr/portal/bbs/B0000338/list.do' },
    { cat:'bok', source:'BOK', type:'ê²½ì œë¶„ì„', date:'2025-11', title:'í•œêµ­ ì ì¬ì„±ì¥ë¥  í•˜ë½ ìš”ì¸ê³¼ êµ¬ì¡°ê°œí˜ ë°©í–¥', desc:'ì¸êµ¬ê°ì†Œ, ìƒì‚°ì„± ë‘”í™”, íˆ¬ì ìœ„ì¶•ì´ ì ì¬ì„±ì¥ë¥ ì— ë¯¸ì¹˜ëŠ” ê¸°ì—¬ë„ ë¶„í•´. R&D íˆ¬ì íš¨ìœ¨í™”ì™€ ì„œë¹„ìŠ¤ì—… ê·œì œ ê°œí˜ì˜ ì •ëŸ‰ì  íš¨ê³¼ ì¶”ì •.', tags:['ì ì¬ì„±ì¥ë¥ ','ì¸êµ¬ê°ì†Œ','êµ¬ì¡°ê°œí˜'], url:'https://www.bok.or.kr/portal/bbs/B0000338/list.do' },

    // ì—°ì¤€ / FRED
    { cat:'fed', source:'FED', type:'Working Paper', date:'2026-02', title:'Monetary Policy Transmission in a High-Debt Environment', desc:'ê³ ë¶€ì±„ í™˜ê²½ì—ì„œ í†µí™”ì •ì±… ì „ë‹¬ ë©”ì»¤ë‹ˆì¦˜ì˜ ë³€í™”ë¥¼ ë¶„ì„. ê°€ê³„ë¶€ì±„ ë¹„ìœ¨ì´ ë†’ì„ìˆ˜ë¡ ê¸ˆë¦¬ ì¸ìƒì˜ ì†Œë¹„ ì–µì œ íš¨ê³¼ê°€ ê°•í•˜ê²Œ ë‚˜íƒ€ë‚¨.', tags:['Monetary Policy','Household Debt','Fed'], url:'https://www.federalreserve.gov/econres/feds-notes.htm' },
    { cat:'fed', source:'FED', type:'FEDS Notes', date:'2026-01', title:'The Neutral Rate of Interest: Updated Estimates for 2026', desc:'ìì—°ì´ììœ¨(r*) ìµœì‹  ì¶”ì •ì¹˜ ì—…ë°ì´íŠ¸. Holston-Laubach-Williams ëª¨í˜• ê¸°ì¤€ ë¯¸êµ­ r*ëŠ” 1.2~1.8% ë²”ìœ„ë¡œ, íŒ¬ë°ë¯¹ ì´ì „ ëŒ€ë¹„ ì†Œí­ ìƒìŠ¹.', tags:['Neutral Rate','r-star','Interest Rate'], url:'https://www.federalreserve.gov/econres/feds-notes.htm' },
    { cat:'fed', source:'FRED', type:'Research Article', date:'2026-01', title:'Yield Curve Inversions and Recession Predictions: 2025 Update', desc:'ì¥ë‹¨ê¸° ê¸ˆë¦¬ ì—­ì „ì˜ ê²½ê¸°ì¹¨ì²´ ì˜ˆì¸¡ë ¥ ë¶„ì„. 10Y-2Y ìŠ¤í”„ë ˆë“œê°€ 2024ë…„ ì—­ì „ í›„ 2025ë…„ ì •ìƒí™”ë˜ì—ˆìœ¼ë‚˜, ì—­ì‚¬ì  íŒ¨í„´ ìƒ 12~18ê°œì›” ë‚´ ê²½ê¸° ë‘”í™” ê°€ëŠ¥ì„±.', tags:['Yield Curve','Recession','Spread'], url:'https://research.stlouisfed.org/publications/economic-synopses' },
    { cat:'fed', source:'FED', type:'Speech', date:'2025-12', title:'Financial Stability and the Role of Macroprudential Policy', desc:'ì—°ì¤€ ì´ì‚¬ì˜ ê±°ì‹œê±´ì „ì„± ì •ì±… ê´€ë ¨ ì—°ì„¤. ë¹„ì€í–‰ ê¸ˆìœµê¸°ê´€ì˜ ì‹œìŠ¤í…œ ë¦¬ìŠ¤í¬ ëª¨ë‹ˆí„°ë§ ê°•í™” í•„ìš”ì„±ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ê°œì„  ë°©í–¥.', tags:['Financial Stability','Macroprudential','Stress Test'], url:'https://www.federalreserve.gov/newsevents/speeches.htm' },
    { cat:'fed', source:'FRED', type:'Economic Synopses', date:'2025-12', title:'Labor Market Dynamics: AI Adoption and Wage Inequality', desc:'AI ê¸°ìˆ  í™•ì‚°ì— ë”°ë¥¸ ë¯¸êµ­ ë…¸ë™ì‹œì¥ êµ¬ì¡° ë³€í™”. ê³ ìˆ™ë ¨/ì €ìˆ™ë ¨ ê°„ ì„ê¸ˆ ê²©ì°¨ í™•ëŒ€ ì¶”ì„¸ì™€ ì •ì±…ì  ì‹œì‚¬ì ì„ ë¯¸ì‹œ ë°ì´í„°ë¡œ ë¶„ì„.', tags:['AI','Labor Market','Wage Inequality'], url:'https://research.stlouisfed.org/publications/economic-synopses' },
    { cat:'fed', source:'FED', type:'Working Paper', date:'2025-11', title:'Quantitative Tightening and Treasury Market Liquidity', desc:'ì—°ì¤€ì˜ ì–‘ì  ê¸´ì¶•(QT)ì´ êµ­ì±„ì‹œì¥ ìœ ë™ì„±ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ë¶„ì„. Bid-ask ìŠ¤í”„ë ˆë“œ, ì‹œì¥ ê¹Šì´ ì§€í‘œë¥¼ í™œìš©í•œ ìœ ë™ì„± ì¸¡ì •.', tags:['QT','Treasury','Liquidity'], url:'https://www.federalreserve.gov/econres/feds-notes.htm' },

    // KDI
    { cat:'kdi', source:'KDI', type:'ì •ì±…ì—°êµ¬', date:'2026-01', title:'í•œêµ­ ê²½ì œì˜ ì €ì„±ì¥ ê³ ì°©í™” ìœ„í—˜ê³¼ ëŒ€ì‘ ì „ëµ', desc:'ì ì¬ì„±ì¥ë¥  í•˜ë½ ì¶”ì„¸ì˜ êµ¬ì¡°ì  ì›ì¸ì„ ì¸êµ¬Â·ìë³¸Â·ìƒì‚°ì„± ì¸¡ë©´ì—ì„œ ë¶„ì„í•˜ê³ , ê·œì œ ê°œí˜ê³¼ ì¸ì ìë³¸ íˆ¬ì í™•ëŒ€ ë°©ì•ˆ ì œì‹œ.', tags:['ì €ì„±ì¥','ì ì¬ì„±ì¥ë¥ ','ì •ì±…'], url:'https://www.kdi.re.kr/research/reportList' },
    { cat:'kdi', source:'KDI', type:'ê²½ì œì „ë§', date:'2026-01', title:'2026ë…„ ìƒë°˜ê¸° ê²½ì œì „ë§: ìˆ˜ì¶œ ì£¼ë„ ì™„ë§Œí•œ íšŒë³µì„¸', desc:'ë°˜ë„ì²´Â·ìë™ì°¨ ìˆ˜ì¶œ í˜¸ì¡°ì— í˜ì…ì–´ ìƒë°˜ê¸° ì„±ì¥ë¥  2.0% ì „ë§. ë‹¤ë§Œ ê³ ê¸ˆë¦¬ ì§€ì†ì— ë”°ë¥¸ ë‚´ìˆ˜ ë¶€ì§„ ë¦¬ìŠ¤í¬ì™€ ëŒ€ì™¸ ë¶ˆí™•ì‹¤ì„± ê²½ê³„ í•„ìš”.', tags:['ê²½ì œì „ë§','ìˆ˜ì¶œ','ë‚´ìˆ˜'], url:'https://www.kdi.re.kr/forecast/forecastView' },
    { cat:'kdi', source:'KDI', type:'Working Paper', date:'2025-12', title:'ê³ ë ¹í™”ì™€ ì¬ì • ì§€ì†ê°€ëŠ¥ì„±: êµ­ë¯¼ì—°ê¸ˆ ê°œí˜ì˜ ê²½ì œì  íš¨ê³¼', desc:'ì¸êµ¬ ê³ ë ¹í™”ì— ë”°ë¥¸ ì—°ê¸ˆ ì¬ì • ì†Œì§„ ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„. ë³´í—˜ë£Œìœ¨ ì¸ìƒ, ìˆ˜ê¸‰ ì—°ë ¹ ì¡°ì •, ê¸°ê¸ˆ ìš´ìš© ìˆ˜ìµë¥  ê°œì„ ì˜ ì¡°í•©ë³„ íš¨ê³¼ ì‹œë®¬ë ˆì´ì…˜.', tags:['ê³ ë ¹í™”','êµ­ë¯¼ì—°ê¸ˆ','ì¬ì •'], url:'https://www.kdi.re.kr/research/reportList' },
    { cat:'kdi', source:'KDI', type:'ì´ìŠˆë¶„ì„', date:'2025-11', title:'í”Œë«í¼ ë…¸ë™ì ì‚¬íšŒì•ˆì „ë§ í™•ì¶© ë°©ì•ˆ', desc:'ë°°ë‹¬Â·ìš´ì „ ë“± í”Œë«í¼ ë…¸ë™ìì˜ ì‚°ì¬Â·ê³ ìš©ë³´í—˜ ì ìš© í˜„í™©ê³¼ í•´ì™¸ ì‚¬ë¡€ë¥¼ ë¹„êµ ë¶„ì„. ì†Œë“ íŒŒì•… ì¸í”„ë¼ êµ¬ì¶•ê³¼ ì‚¬ê°ì§€ëŒ€ í•´ì†Œ ë°©ì•ˆ ì œì•ˆ.', tags:['í”Œë«í¼ë…¸ë™','ì‚¬íšŒì•ˆì „ë§','ê³ ìš©'], url:'https://www.kdi.re.kr/research/reportList' },

    // êµ­ì œê¸°êµ¬
    { cat:'intl', source:'IMF', type:'Working Paper', date:'2026-01', title:'Global Financial Stability Report: January 2026 Update', desc:'ê¸€ë¡œë²Œ ê¸ˆìœµì•ˆì •ì„± í‰ê°€. ì„ ì§„êµ­ ê³ ê¸ˆë¦¬ ì¥ê¸°í™”ì— ë”°ë¥¸ ì‹ í¥êµ­ ìë³¸ ìœ ì¶œ ë¦¬ìŠ¤í¬, ìƒì—…ìš© ë¶€ë™ì‚° ë¶€ì‹¤, AI ê´€ë ¨ ê¸°ìˆ ì£¼ ë°¸ë¥˜ì—ì´ì…˜ ìš°ë ¤.', tags:['Financial Stability','Global','Emerging Markets'], url:'https://www.imf.org/en/Publications/GFSR' },
    { cat:'intl', source:'BIS', type:'Quarterly Review', date:'2025-12', title:'Digital Currencies and Cross-Border Payments', desc:'CBDCì™€ ìŠ¤í…Œì´ë¸”ì½”ì¸ì˜ êµ­ì œê²°ì œ í™œìš© ê°€ëŠ¥ì„± ë¶„ì„. mBridge í”„ë¡œì íŠ¸ ì„±ê³¼ì™€ ë„ì „ê³¼ì œ, ê·œì œ í”„ë ˆì„ì›Œí¬ ë°©í–¥ ì œì‹œ.', tags:['CBDC','Cross-Border','Digital Currency'], url:'https://www.bis.org/publ/quarterly.htm' },
    { cat:'intl', source:'NBER', type:'Working Paper', date:'2025-12', title:'The Macroeconomic Effects of Climate Policy Uncertainty', desc:'ê¸°í›„ì •ì±… ë¶ˆí™•ì‹¤ì„±ì´ ê¸°ì—… íˆ¬ì, GDP, ì£¼ê°€ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ íŒ¨ë„ VARë¡œ ì¶”ì •. ì •ì±… ë¶ˆí™•ì‹¤ì„± 1 í‘œì¤€í¸ì°¨ ì¦ê°€ ì‹œ íˆ¬ì 0.8% ê°ì†Œ.', tags:['Climate Policy','Uncertainty','Investment'], url:'https://www.nber.org/papers' },
    { cat:'intl', source:'IMF', type:'Country Report', date:'2025-11', title:'Republic of Korea: 2025 Article IV Consultation', desc:'IMFì˜ í•œêµ­ ê²½ì œ ì—°ë¡€ í‰ê°€. í†µí™”Â·ì¬ì • ì •ì±… ì¡°í•©, ê°€ê³„ë¶€ì±„ ê´€ë¦¬, êµ¬ì¡°ê°œí˜ ë°©í–¥ì— ëŒ€í•œ ê¶Œê³ ì•ˆ í¬í•¨.', tags:['Korea','IMF','Article IV'], url:'https://www.imf.org/en/Countries/KOR' },
    { cat:'intl', source:'BIS', type:'Working Paper', date:'2025-11', title:'Central Bank Digital Currencies: Financial Stability Implications', desc:'CBDC ë„ì…ì´ ì€í–‰ ì˜ˆê¸ˆ ì´íƒˆ, ê¸ˆìœµ ì¤‘ê°œ ê¸°ëŠ¥, ìœ„ê¸° ì‹œ ë””ì§€í„¸ ë±…í¬ëŸ° ê°€ëŠ¥ì„±ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì´ë¡ Â·ì‹¤ì¦ì ìœ¼ë¡œ ë¶„ì„.', tags:['CBDC','Financial Stability','Bank Run'], url:'https://www.bis.org/publ/work.htm' },
    { cat:'intl', source:'NBER', type:'Working Paper', date:'2025-10', title:'Fiscal Policy Multipliers in a Low Interest Rate Environment', desc:'ì €ê¸ˆë¦¬ í™˜ê²½ì—ì„œ ì¬ì •ìŠ¹ìˆ˜ê°€ ê³ ê¸ˆë¦¬ í™˜ê²½ ëŒ€ë¹„ 1.5~2ë°° í° ê²ƒì„ 48ê°œêµ­ íŒ¨ë„ ë°ì´í„°ë¡œ ì‹¤ì¦. ê¸ˆë¦¬ í•˜í•œ ì œì•½ ì‹œ ì¬ì •ì •ì±…ì˜ ìœ íš¨ì„± ê°•ì¡°.', tags:['Fiscal Policy','Multiplier','Low Interest Rate'], url:'https://www.nber.org/papers' },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RESOURCES DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const resources = [
    { icon:'ğŸ›ï¸', name:'í•œêµ­ì€í–‰ ê²½ì œì—°êµ¬ì›', desc:'BOK Working Paper, ê²½ì œë¶„ì„, ê¸ˆìœµì•ˆì •ë³´ê³ ì„œ ë“± í•œêµ­ì€í–‰ ë°œê°„ ì—°êµ¬ ìë£Œ.', url:'https://www.bok.or.kr/portal/bbs/B0000338/list.do' },
    { icon:'ğŸ‡ºğŸ‡¸', name:'Federal Reserve (FRED)', desc:'ë¯¸êµ­ ì—°ë°©ì¤€ë¹„ì œë„ ê²½ì œ ë°ì´í„°Â·ì—°êµ¬ ë…¼ë¬¸Â·FEDS Notes.', url:'https://research.stlouisfed.org/' },
    { icon:'ğŸ“Š', name:'í•œêµ­ì€í–‰ ECOS', desc:'í•œêµ­ì€í–‰ ê²½ì œí†µê³„ì‹œìŠ¤í…œ. ê¸ˆë¦¬Â·í™˜ìœ¨Â·GDPÂ·ë¬¼ê°€ ë“± êµ­ë‚´ í•µì‹¬ ê²½ì œ ì§€í‘œ ë°ì´í„°.', url:'https://ecos.bok.or.kr/' },
    { icon:'ğŸ”¬', name:'KDI í•œêµ­ê°œë°œì—°êµ¬ì›', desc:'í•œêµ­ ê²½ì œì •ì±… ì—°êµ¬. ê²½ì œì „ë§, ì •ì±…ì—°êµ¬, ì´ìŠˆë¶„ì„ ë³´ê³ ì„œ.', url:'https://www.kdi.re.kr/research/reportList' },
    { icon:'ğŸŒ', name:'IMF ì—°êµ¬ ì¶œíŒë¬¼', desc:'World Economic Outlook, Global Financial Stability Report ë“± IMF í•µì‹¬ ë³´ê³ ì„œ.', url:'https://www.imf.org/en/Publications' },
    { icon:'ğŸ¦', name:'BIS êµ­ì œê²°ì œì€í–‰', desc:'Quarterly Review, Working Papers ë“± êµ­ì œ ê¸ˆìœµÂ·í†µí™” ì—°êµ¬ ìë£Œ.', url:'https://www.bis.org/research/index.htm' },
    { icon:'ğŸ“', name:'NBER Working Papers', desc:'ë¯¸êµ­ êµ­ë¦½ê²½ì œì—°êµ¬ì†Œ ì›Œí‚¹í˜ì´í¼. ê±°ì‹œÂ·ë¯¸ì‹œÂ·ë…¸ë™Â·ê¸ˆìœµ ì „ ë¶„ì•¼.', url:'https://www.nber.org/papers' },
    { icon:'ğŸ“š', name:'SSRN Economics', desc:'ê²½ì œí•™Â·ê¸ˆìœµí•™ í”„ë¦¬í”„ë¦°íŠ¸ ë…¼ë¬¸ ë°ì´í„°ë² ì´ìŠ¤. ë¬´ë£Œ ì—´ëŒ ê°€ëŠ¥.', url:'https://papers.ssrn.com/sol3/JELJOUR_Results.cfm?form_name=journalBrowse&journal_id=1587443' },
    { icon:'ğŸ‡°ğŸ‡·', name:'í•œêµ­ê¸ˆìœµì—°êµ¬ì›', desc:'ê¸ˆìœµì •ì±…Â·ê¸ˆìœµì‹œì¥Â·í•€í…Œí¬ ê´€ë ¨ êµ­ë‚´ ì—°êµ¬ë³´ê³ ì„œ ë° ì´ìŠˆ ë¶„ì„.', url:'https://www.kif.re.kr/kif/publication/researchList.do' },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentCat = 'all';
let currentSearch = '';

function renderPapers() {
    const grid = document.getElementById('papersGrid');
    let filtered = papers;

    if (currentCat !== 'all') {
        filtered = filtered.filter(p => p.cat === currentCat);
    }
    if (currentSearch) {
        const q = currentSearch.toLowerCase();
        filtered = filtered.filter(p =>
            p.title.toLowerCase().includes(q) ||
            p.desc.toLowerCase().includes(q) ||
            p.tags.some(t => t.toLowerCase().includes(q))
        );
    }

    // Sort
    const sort = document.getElementById('sortSelect').value;
    if (sort === 'date') {
        filtered.sort((a, b) => b.date.localeCompare(a.date));
    }

    // Update counts
    document.getElementById('countAll').textContent = papers.length;
    document.getElementById('countBok').textContent = papers.filter(p => p.cat === 'bok').length;
    document.getElementById('countFed').textContent = papers.filter(p => p.cat === 'fed').length;
    document.getElementById('countKdi').textContent = papers.filter(p => p.cat === 'kdi').length;
    document.getElementById('countIntl').textContent = papers.filter(p => p.cat === 'intl').length;

    if (filtered.length === 0) {
        grid.innerHTML = '<div class="empty-state">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
        return;
    }

    grid.innerHTML = filtered.map(p => {
        const srcClass = p.source.toLowerCase().replace(/\s/g, '');
        return `
        <a href="${p.url}" target="_blank" rel="noopener" class="paper-card">
            <div class="paper-meta">
                <span class="paper-source ${p.cat}">${p.source}</span>
                <span class="paper-type">${p.type}</span>
                <span class="paper-date">${p.date}</span>
            </div>
            <div class="paper-title">${highlightSearch(p.title)}</div>
            <div class="paper-desc">${p.desc}</div>
            <div class="paper-tags">${p.tags.map(t => `<span class="paper-tag">${t}</span>`).join('')}</div>
            <div class="paper-arrow">â†’</div>
        </a>`;
    }).join('');
}

function highlightSearch(text) {
    if (!currentSearch) return text;
    const regex = new RegExp(`(${currentSearch.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
    return text.replace(regex, '<mark style="background:rgba(212,168,83,0.3);color:var(--accent-gold);border-radius:2px;padding:0 2px">$1</mark>');
}

function renderResources() {
    document.getElementById('resourcesGrid').innerHTML = resources.map(r => `
        <a href="${r.url}" target="_blank" rel="noopener" class="resource-card">
            <div class="resource-icon">${r.icon}</div>
            <div class="resource-name">${r.name}</div>
            <div class="resource-desc">${r.desc}</div>
            <div class="resource-url">${r.url.replace('https://', '').split('/')[0]}</div>
        </a>
    `).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  EVENT LISTENERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentCat = tab.dataset.cat;
        renderPapers();
    });
});

document.getElementById('searchInput').addEventListener('input', e => {
    currentSearch = e.target.value.trim();
    renderPapers();
});

document.getElementById('sortSelect').addEventListener('change', renderPapers);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderPapers();
renderResources();
loadIndicators();
</script>
</body>
</html>
